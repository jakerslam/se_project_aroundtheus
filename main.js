!function(){"use strict";class e{constructor(e,t,n){this._handleImageClick=n,this._cardImgUrl=e.link,this._cardName=e.name,this._cardElement=t.querySelector(".card").cloneNode(!0),this._likeButton=this._cardElement.querySelector(".card__heart-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardImage=this._cardElement.querySelector(".card__img"),this._cardTitle=this._cardElement.querySelector(".card__title")}_setEventListeners(){this._likeButton.addEventListener("click",this._handleLike),this._deleteButton.addEventListener("click",this._handleDelete),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this._cardImgUrl,this._cardName)}))}_handleLike=()=>{this._likeButton.classList.toggle("card__heart-button_clicked")};_handleDelete=()=>{this._cardElement.remove(),this._cardElement=null};generateCard=()=>(this._cardImage.src=this._cardImgUrl,this._cardImage.alt="An image of "+this._cardName,this._cardTitle.textContent=this._cardName,this._setEventListeners(),this._cardElement)}class t{constructor(e,t){this._config=e,this._config.formSelector=`#${t.id}`,this._formElement=document.querySelector(this._config.formSelector)}_showInputError=e=>{const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.add(this._config.inputErrorClass),t.classList.add(this._config.showErrorElClass),t.textContent=e.validationMessage};_hideInputError=e=>{const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.showErrorElClass),t.textContent=""};_hasInvalidInput=e=>e.some((e=>!e.validity.valid));_disableButton=e=>{e.classList.add(this._config.inactiveButtonClass),e.disabled=!0};_enableButton=e=>{e.classList.remove(this._config.inactiveButtonClass),e.disabled=!1};_toggleButtonState(e){const t=this._formElement.querySelector(this._config.submitButtonSelector);this._hasInvalidInput(e)?this._disableButton(t):this._enableButton(t)}_checkValidity=e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e)};_resetValidation(e){this._toggleButtonState(e),e.forEach((e=>{this._hideInputError(e)}))}_setEventListeners(){const{inputSelector:e}=this._config,t=[...this._formElement.querySelectorAll(e)];t.forEach((e=>{e.addEventListener("input",(()=>{this._toggleButtonState(t,this._formElement),this._checkValidity(e)}))})),this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this._resetValidation(t)}))}enableValidation(){this._setEventListeners()}}class n{constructor(e){this._popUpElement=document.querySelector(e)}open(){this._popUpElement.classList.remove("modal_hidden"),this._popUpElement.classList.add("modal_visible-js"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popUpElement.classList.add("modal_hidden"),this._popUpElement.classList.remove("modal_visible-js"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._closeButton=this._popUpElement.querySelector(".modal__container-close-button"),this._popUpBox=this._popUpElement.querySelector(".modal__container_js"),this._closeButton.addEventListener("click",(()=>{this.close()})),this._popUpElement.addEventListener("click",(e=>{this._popUpBox.contains(e.target)||this.close()}))}}class o extends n{constructor(e,t){super(e),this._handleSubmit=t,this._form=this._popUpElement.querySelector(".modal__form")}_getInputValues(){const e=Array.from(this._form.querySelectorAll(".modal__container-input")),t={};return e.forEach(((e,n)=>{t[e.id]=e.value})),t}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._getInputValues())}))}}const r={cardModal:document.querySelector("#card-modal"),cardForm:document.forms["card-form"],titleInput:document.querySelector(".modal__container-input_card-title-js"),linkInput:document.querySelector(".modal__container-input_card-url-js"),cardTemplate:document.querySelector("#cardTemplate").content},s={formSelector:".modal__form",inputSelector:".modal__container-input",submitButtonSelector:".modal__container-button",inactiveButtonClass:"modal__container-button_disabled",inputErrorClass:"modal__container-input_error",showErrorElClass:"modal__container_error-message_visible"},i={addCardButton:document.querySelector(".profile__add-button"),editOpenButton:document.querySelector(".profile__edit-button")},a={editProfileModal:document.querySelector("#edit-modal"),nameInput:document.querySelector("#edit-modal").querySelector(".modal__container-input_name"),profileBioInputEl:document.querySelector("#edit-modal").querySelector(".modal__container-input_bio"),profileNameEl:document.querySelector(".profile__author-title"),profileBioEl:document.querySelector(".profile__subtext")},l=new o("#edit-modal",(e=>{!function(e){console.log(e),u.setUserInfo(e["modal__container-input_name"],e["modal__container-input_bio"]),a.profileBioInputEl.value="",a.nameInput.value="",l.close()}(e)})),c=new o("#card-modal",(e=>{!function(e){console.log(e);const t=e["modal__container-input_title"],n=e["modal__container-input_url"];console.log("newCardEls.linkInput in addCard in index.js:",r.linkInput);const o=_({name:t,link:n});m.addItem(o),r.cardForm.reset(),c.close()}(e)})),d=new class extends n{constructor(e){super(e),this._popupImage=this._popUpElement.querySelector(".modal__container-image"),this._popupTitle=this._popUpElement.querySelector(".modal__container-image-title")}open(e){this._popupImage.src=e.cardImgUrl,this._popupImage.alt=`A photo of ${e.cardName}`,this._popupTitle.textContent=e.cardName,super.open()}}("#photoViewModal"),m=new class{constructor(e,t){let{items:n,renderer:o}=e;this._items=n,this._renderer=o,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{const t=_(e);m.addItem(t)}},".cards"),u=new class{constructor(e,t){this._userJobElement=t,this._userNameElement=e}getUserInfo(){return{userJob:this._userJobElement.textContent,userName:this._userNameElement.textContent}}setUserInfo(e,t){this._userJobElement.textContent=t,this._userNameElement.textContent=e}}(a.profileNameEl,a.profileBioEl),_=t=>new e(t,r.cardTemplate,((e,t)=>{d.open({cardImgUrl:e,cardName:t})})).generateCard();m.renderItems(),Array.from(document.querySelectorAll(".modal")).forEach((e=>{(e=>{new t(s,e).enableValidation()})(e)})),i.addCardButton.addEventListener("click",(()=>{c.open()})),i.editOpenButton.addEventListener("click",(()=>{l.open(),function(){const e=u.getUserInfo();a.profileBioInputEl.value=e.userJob,a.nameInput.value=e.userName}()})),c.setEventListeners(),l.setEventListeners(),d.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Vm5ELE1BQU1DLEtBQUtwRCxTQUFTNEIsaUJBQWlCLFdBQVdGLFNBQVN5RixJQXRDbENBLEtBQ0YsSUFBSXpILEVBQWNzRSxFQUFXbUQsR0FDckNwRixrQkFDTSxFQW9DakJxRixDQUFnQkQsRUFBTSxJQUt4QmxELEVBQWFDLGNBQWNsRixpQkFBaUIsU0FBUyxLQUNuRGlHLEVBQVk5QyxNQUFNLElBRXBCOEIsRUFBYUUsZUFBZW5GLGlCQUFpQixTQUFTLEtBQ3BEMEYsRUFBZ0J2QyxPQTFDcEIsV0FDRSxNQUFNa0YsRUFBV3ZDLEVBQWdCaUMsY0FDakMzQyxFQUFXRyxrQkFBa0JmLE1BQVE2RCxFQUFTTCxRQUM5QzVDLEVBQVdFLFVBQVVkLE1BQVE2RCxFQUFTSixRQUN4QyxDQXVDSUssRUFBbUIsSUFFckJyQyxFQUFZekMsb0JBQ1prQyxFQUFnQmxDLG9CQUNoQmtELEVBQVdsRCxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy9pbXBvcnQge30gZnJvbVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFRlbXBsYXRlLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gICAgdGhpcy5fY2FyZEltZ1VybCA9IGRhdGEubGluaztcbiAgICB0aGlzLl9jYXJkTmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIikuY2xvbmVOb2RlKHRydWUpOztcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19oZWFydC1idXR0b25cIik7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxuICAgICk7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWdcIik7XG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVMaWtlKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZURlbGV0ZSk7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX2NhcmRJbWdVcmwsIHRoaXMuX2NhcmROYW1lKTtcbiAgICB9KTtcbiAgfVxuICBfaGFuZGxlTGlrZSA9ICgpID0+IHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19oZWFydC1idXR0b25fY2xpY2tlZFwiKTtcbiAgfTtcbiAgX2hhbmRsZURlbGV0ZSA9ICgpID0+IHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XG4gIH07XG5cbiAgZ2VuZXJhdGVDYXJkID0gKCkgPT4ge1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9jYXJkSW1nVXJsO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSBcIkFuIGltYWdlIG9mIFwiICsgdGhpcy5fY2FyZE5hbWU7XG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fY2FyZE5hbWU7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH07XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5fY29uZmlnLmZvcm1TZWxlY3RvciA9IGAjJHtmb3JtU2VsZWN0b3IuaWR9YDtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLmZvcm1TZWxlY3Rvcik7XG4gIH1cbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWwpID0+IHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWwuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5zaG93RXJyb3JFbENsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xuICB9O1xuXG4gIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsKSA9PiB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsLmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuc2hvd0Vycm9yRWxDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfTtcbiAgX2hhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH07XG4gIF9kaXNhYmxlQnV0dG9uID0gKGJ1dHRvbikgPT4ge1xuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICBidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9O1xuICBfZW5hYmxlQnV0dG9uID0gKGJ1dHRvbikgPT4ge1xuICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICBidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfTtcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0RWxzKSB7XG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dEVscykpIHtcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oYnV0dG9uRWxlbWVudCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2VuYWJsZUJ1dHRvbihidXR0b25FbGVtZW50KTtcbiAgfVxuICBfY2hlY2tWYWxpZGl0eSA9IChpbnB1dEVsKSA9PiB7XG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfVxuICB9O1xuICBfcmVzZXRWYWxpZGF0aW9uKGlucHV0RWxzKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRFbHMpO1xuICAgIGlucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH0pO1xuICB9XG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBjb25zdCB7IGlucHV0U2VsZWN0b3IgfSA9IHRoaXMuX2NvbmZpZztcbiAgICBjb25zdCBpbnB1dEVscyA9IFsuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGlucHV0U2VsZWN0b3IpXTtcbiAgICBpbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0RWxzLCB0aGlzLl9mb3JtRWxlbWVudCk7XG4gICAgICAgIHRoaXMuX2NoZWNrVmFsaWRpdHkoaW5wdXRFbCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fcmVzZXRWYWxpZGF0aW9uKGlucHV0RWxzKTtcbiAgICB9KTtcbiAgfVxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcFVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3BVcEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcFVwU2VsZWN0b3IpO1xuICB9XG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wVXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9oaWRkZW5cIik7XG4gICAgdGhpcy5fcG9wVXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF92aXNpYmxlLWpzXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcFVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfaGlkZGVuXCIpO1xuICAgIHRoaXMuX3BvcFVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfdmlzaWJsZS1qc1wiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3BVcEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLm1vZGFsX19jb250YWluZXItY2xvc2UtYnV0dG9uXCJcbiAgICApO1xuICAgIHRoaXMuX3BvcFVwQm94ID0gdGhpcy5fcG9wVXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NvbnRhaW5lcl9qc1wiKTtcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3BvcFVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLl9wb3BVcEJveC5jb250YWlucyhldnQudGFyZ2V0KSkgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcFVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcFVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wVXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gIH1cbiBcbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0RWxzID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2NvbnRhaW5lci1pbnB1dFwiKSk7XG4gICAgY29uc3QgaW5wdXRWYWxzID0ge307XG4gICAgaW5wdXRFbHMuZm9yRWFjaCgoaW5wdXQsaW5kZXgpPT57XG4gICAgICBpbnB1dFZhbHNbaW5wdXQuaWRdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGlucHV0VmFscztcbiAgfVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgbmV3Q2FyZEVscyA9IHtcbiAgY2FyZE1vZGFsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtbW9kYWxcIiksXG4gIGNhcmRGb3JtOiBkb2N1bWVudC5mb3Jtc1tcImNhcmQtZm9ybVwiXSxcbiAgdGl0bGVJbnB1dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY29udGFpbmVyLWlucHV0X2NhcmQtdGl0bGUtanNcIiksXG4gIGxpbmtJbnB1dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY29udGFpbmVyLWlucHV0X2NhcmQtdXJsLWpzXCIpLFxuICBjYXJkVGVtcGxhdGU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZFRlbXBsYXRlXCIpLmNvbnRlbnQsXG59O1xuXG5leHBvcnQgY29uc3QgZ2VuQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19jb250YWluZXItaW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19jb250YWluZXItYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2NvbnRhaW5lci1idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19jb250YWluZXItaW5wdXRfZXJyb3JcIixcbiAgc2hvd0Vycm9yRWxDbGFzczogXCJtb2RhbF9fY29udGFpbmVyX2Vycm9yLW1lc3NhZ2VfdmlzaWJsZVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IGludGVyZmFjZUVscyA9IHtcbiAgYWRkQ2FyZEJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpLFxuICBlZGl0T3BlbkJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKSxcbn07XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlRWxzID0ge1xuICBlZGl0UHJvZmlsZU1vZGFsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIiksXG4gIG5hbWVJbnB1dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LW1vZGFsXCIpLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NvbnRhaW5lci1pbnB1dF9uYW1lXCIpLFxuICBwcm9maWxlQmlvSW5wdXRFbDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LW1vZGFsXCIpLnF1ZXJ5U2VsZWN0b3IoXG4gICAgXCIubW9kYWxfX2NvbnRhaW5lci1pbnB1dF9iaW9cIlxuICApLFxuICBwcm9maWxlTmFtZUVsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F1dGhvci10aXRsZVwiKSxcbiAgcHJvZmlsZUJpb0VsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3N1YnRleHRcIiksXG59O1xuIiwiLyoqIGltcG9ydHMgKi9cbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IHtcbiAgaW5pdGlhbENhcmRzLFxuICBuZXdDYXJkRWxzLFxuICBnZW5Db25maWcsXG4gIGludGVyZmFjZUVscyxcbiAgcHJvZmlsZUVscyxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5jb25zdCBlZGl0UHJvZmlsZUZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNlZGl0LW1vZGFsXCIsIChpbnB1dFZhbHVlcykgPT4ge1xuICBzYXZlRWRpdFByb2ZpbGVGb3JtKGlucHV0VmFsdWVzKTtcbn0pO1xuXG5jb25zdCBuZXdDYXJkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2NhcmQtbW9kYWxcIiwgKGlucHV0VmFsdWVzKSA9PiB7XG4gIGFkZENhcmQoaW5wdXRWYWx1ZXMpO1xufSk7XG5cbmNvbnN0IGltYWdlUG9wVXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcGhvdG9WaWV3TW9kYWxcIik7XG5cbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoY2FyZCkgPT4ge1xuICAgICAgY29uc3QgbmV3Q2FyZCA9IGNyZWF0ZUNhcmQoY2FyZCk7XG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQpO1xuICAgIH0sXG4gIH0sXG4gIFwiLmNhcmRzXCJcbik7XG5cbmNvbnN0IHVzZXJQcm9maWxlSW5mbyA9IG5ldyBVc2VySW5mbyhcbiAgcHJvZmlsZUVscy5wcm9maWxlTmFtZUVsLFxuICBwcm9maWxlRWxzLnByb2ZpbGVCaW9FbFxuKTtcblxuY29uc3QgY3JlYXRlQ2FyZCA9IChjYXJkKSA9PiB7XG4gIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChcbiAgICBjYXJkLFxuICAgIG5ld0NhcmRFbHMuY2FyZFRlbXBsYXRlLFxuICAgIChjYXJkSW1nVXJsLCBjYXJkTmFtZSkgPT4ge1xuICAgICAgaW1hZ2VQb3BVcC5vcGVuKHsgY2FyZEltZ1VybCwgY2FyZE5hbWUgfSk7XG4gICAgfVxuICApO1xuICByZXR1cm4gbmV3Q2FyZC5nZW5lcmF0ZUNhcmQoKTtcbn07XG5cbmNvbnN0IGNyZWF0ZVZhbGlkYXRvciA9IChtb2RhbCkgPT4ge1xuICBjb25zdCBuZXdWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihnZW5Db25maWcsIG1vZGFsKTtcbiAgbmV3VmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgcmV0dXJuIG5ld1ZhbGlkYXRvcjtcbn07XG5cbmZ1bmN0aW9uIGZpbGxQcm9maWxlSW5wdXRzKCkge1xuICBjb25zdCB1c2VySW5mbyA9IHVzZXJQcm9maWxlSW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlRWxzLnByb2ZpbGVCaW9JbnB1dEVsLnZhbHVlID0gdXNlckluZm8udXNlckpvYjtcbiAgcHJvZmlsZUVscy5uYW1lSW5wdXQudmFsdWUgPSB1c2VySW5mby51c2VyTmFtZTtcbn1cblxuZnVuY3Rpb24gc2F2ZUVkaXRQcm9maWxlRm9ybShpbnB1dFZhbHVlcykge1xuICBjb25zb2xlLmxvZyhpbnB1dFZhbHVlcyk7XG4gIC8vY29uc29sZS5sb2coaW5wdXRWYWx1ZXNbXCJtb2RhbF9fY29udGFpbmVyLWlucHV0X25hbWVcIl0pO1xuICB1c2VyUHJvZmlsZUluZm8uc2V0VXNlckluZm8oXG4gICAgaW5wdXRWYWx1ZXNbXCJtb2RhbF9fY29udGFpbmVyLWlucHV0X25hbWVcIl0sXG4gICAgaW5wdXRWYWx1ZXNbXCJtb2RhbF9fY29udGFpbmVyLWlucHV0X2Jpb1wiXVxuICApOyAgXG4gIC8vZWRpdFByb2ZpbGVGb3JtLl9nZXRJbnB1dFZhbHVlcygpO1xuICBwcm9maWxlRWxzLnByb2ZpbGVCaW9JbnB1dEVsLnZhbHVlID0gXCJcIjtcbiAgcHJvZmlsZUVscy5uYW1lSW5wdXQudmFsdWUgPSBcIlwiO1xuICBlZGl0UHJvZmlsZUZvcm0uY2xvc2UoKTtcbn1cblxuZnVuY3Rpb24gYWRkQ2FyZChpbnB1dFZhbHVlcykge1xuICBjb25zb2xlLmxvZyhpbnB1dFZhbHVlcyk7XG4gIGNvbnN0IHRpdGxlID0gaW5wdXRWYWx1ZXNbXCJtb2RhbF9fY29udGFpbmVyLWlucHV0X3RpdGxlXCJdO1xuICBjb25zdCB1cmwgPSBpbnB1dFZhbHVlc1tcIm1vZGFsX19jb250YWluZXItaW5wdXRfdXJsXCJdO1xuICBjb25zb2xlLmxvZyhcIm5ld0NhcmRFbHMubGlua0lucHV0IGluIGFkZENhcmQgaW4gaW5kZXguanM6XCIsbmV3Q2FyZEVscy5saW5rSW5wdXQpO1xuICBjb25zdCBjYXJkRGF0YSA9IHsgbmFtZTogdGl0bGUsIGxpbms6IHVybCB9O1xuICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZCk7XG4gIG5ld0NhcmRFbHMuY2FyZEZvcm0ucmVzZXQoKTtcbiAgbmV3Q2FyZEZvcm0uY2xvc2UoKTtcbn1cblxuY29uc3QgYWRkVmFsaWRhdG9ycyA9ICgpID0+IHtcbiAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsXCIpKS5mb3JFYWNoKChtb2RhbCkgPT4ge1xuICAgIGNyZWF0ZVZhbGlkYXRvcihtb2RhbCk7XG4gIH0pO1xufTtcblxuY29uc3QgYWRkSW5pdEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICBpbnRlcmZhY2VFbHMuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIG5ld0NhcmRGb3JtLm9wZW4oKTtcbiAgfSk7XG4gIGludGVyZmFjZUVscy5lZGl0T3BlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGVkaXRQcm9maWxlRm9ybS5vcGVuKCk7XG4gICAgZmlsbFByb2ZpbGVJbnB1dHMoKTtcbiAgfSk7XG4gIG5ld0NhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIGVkaXRQcm9maWxlRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuICBpbWFnZVBvcFVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG59O1xuXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuYWRkVmFsaWRhdG9ycygpO1xuYWRkSW5pdEV2ZW50TGlzdGVuZXJzKCk7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3BVcFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wVXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcFVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIubW9kYWxfX2NvbnRhaW5lci1pbWFnZVwiXG4gICAgKTtcbiAgICB0aGlzLl9wb3B1cFRpdGxlID0gdGhpcy5fcG9wVXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5tb2RhbF9fY29udGFpbmVyLWltYWdlLXRpdGxlXCJcbiAgICApO1xuICB9XG5cbiAgb3BlbihkYXRhKSB7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBkYXRhLmNhcmRJbWdVcmw7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBgQSBwaG90byBvZiAke2RhdGEuY2FyZE5hbWV9YDtcbiAgICB0aGlzLl9wb3B1cFRpdGxlLnRleHRDb250ZW50ID0gZGF0YS5jYXJkTmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsIlxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gICAgY29uc3RydWN0b3Ioe2l0ZW1zLHJlbmRlcmVyfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgcmVuZGVySXRlbXMoKSB7XG4gICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH1cbn0iLCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICAgIGNvbnN0cnVjdG9yKG5hbWVFbGVtZW50LCBqb2JFbGVtZW50KXtcbiAgICAgICAgdGhpcy5fdXNlckpvYkVsZW1lbnQgPSBqb2JFbGVtZW50OyBcbiAgICAgICAgdGhpcy5fdXNlck5hbWVFbGVtZW50ID0gbmFtZUVsZW1lbnQ7XG4gICAgfVxuXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIGNvbnN0IHVzZXJKb2IgPSB0aGlzLl91c2VySm9iRWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgICAgY29uc3QgdXNlck5hbWUgPSB0aGlzLl91c2VyTmFtZUVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICAgIHJldHVybiB7dXNlckpvYiwgdXNlck5hbWV9O1xuICAgIH1cblxuICAgIHNldFVzZXJJbmZvKG5hbWVJbnB1dCxqb2JJbnB1dCkge1xuICAgICAgICB0aGlzLl91c2VySm9iRWxlbWVudC50ZXh0Q29udGVudCA9IGpvYklucHV0O1xuICAgICAgICB0aGlzLl91c2VyTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lSW5wdXQ7XG4gICAgfVxufSJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFRlbXBsYXRlIiwiaGFuZGxlSW1hZ2VDbGljayIsInRoaXMiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9jYXJkSW1nVXJsIiwibGluayIsIl9jYXJkTmFtZSIsIm5hbWUiLCJfY2FyZEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xvbmVOb2RlIiwiX2xpa2VCdXR0b24iLCJfZGVsZXRlQnV0dG9uIiwiX2NhcmRJbWFnZSIsIl9jYXJkVGl0bGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2UiLCJfaGFuZGxlRGVsZXRlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlIiwiZ2VuZXJhdGVDYXJkIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiX2NvbmZpZyIsImlkIiwiX2Zvcm1FbGVtZW50IiwiZG9jdW1lbnQiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JFbGVtZW50IiwiYWRkIiwiaW5wdXRFcnJvckNsYXNzIiwic2hvd0Vycm9yRWxDbGFzcyIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2hhc0ludmFsaWRJbnB1dCIsImlucHV0TGlzdCIsInNvbWUiLCJpbnB1dEVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2Rpc2FibGVCdXR0b24iLCJidXR0b24iLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJfZW5hYmxlQnV0dG9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRFbHMiLCJidXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfY2hlY2tWYWxpZGl0eSIsIl9yZXNldFZhbGlkYXRpb24iLCJmb3JFYWNoIiwiaW5wdXRTZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsImVuYWJsZVZhbGlkYXRpb24iLCJQb3B1cCIsInBvcFVwU2VsZWN0b3IiLCJfcG9wVXBFbGVtZW50Iiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwiX2Nsb3NlQnV0dG9uIiwiX3BvcFVwQm94IiwiY29udGFpbnMiLCJ0YXJnZXQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlU3VibWl0IiwiX2Zvcm0iLCJfZ2V0SW5wdXRWYWx1ZXMiLCJBcnJheSIsImZyb20iLCJpbnB1dFZhbHMiLCJpbnB1dCIsImluZGV4IiwidmFsdWUiLCJuZXdDYXJkRWxzIiwiY2FyZE1vZGFsIiwiY2FyZEZvcm0iLCJmb3JtcyIsInRpdGxlSW5wdXQiLCJsaW5rSW5wdXQiLCJjb250ZW50IiwiZ2VuQ29uZmlnIiwiaW50ZXJmYWNlRWxzIiwiYWRkQ2FyZEJ1dHRvbiIsImVkaXRPcGVuQnV0dG9uIiwicHJvZmlsZUVscyIsImVkaXRQcm9maWxlTW9kYWwiLCJuYW1lSW5wdXQiLCJwcm9maWxlQmlvSW5wdXRFbCIsInByb2ZpbGVOYW1lRWwiLCJwcm9maWxlQmlvRWwiLCJlZGl0UHJvZmlsZUZvcm0iLCJpbnB1dFZhbHVlcyIsImNvbnNvbGUiLCJsb2ciLCJ1c2VyUHJvZmlsZUluZm8iLCJzZXRVc2VySW5mbyIsInNhdmVFZGl0UHJvZmlsZUZvcm0iLCJuZXdDYXJkRm9ybSIsInRpdGxlIiwidXJsIiwibmV3Q2FyZCIsImNyZWF0ZUNhcmQiLCJjYXJkU2VjdGlvbiIsImFkZEl0ZW0iLCJyZXNldCIsImFkZENhcmQiLCJpbWFnZVBvcFVwIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBUaXRsZSIsImNhcmRJbWdVcmwiLCJjYXJkTmFtZSIsIl9yZWYiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJjYXJkIiwibmFtZUVsZW1lbnQiLCJqb2JFbGVtZW50IiwiX3VzZXJKb2JFbGVtZW50IiwiX3VzZXJOYW1lRWxlbWVudCIsImdldFVzZXJJbmZvIiwidXNlckpvYiIsInVzZXJOYW1lIiwiam9iSW5wdXQiLCJtb2RhbCIsImNyZWF0ZVZhbGlkYXRvciIsInVzZXJJbmZvIiwiZmlsbFByb2ZpbGVJbnB1dHMiXSwic291cmNlUm9vdCI6IiJ9